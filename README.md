'aW1wb3J0IG9zLHN5cwpvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJlcXVlc3RzJykKb3Muc3lzdGVtKCdwaXAgaW5zdGFsbCBiczQnKQpvcy5zeXN0ZW0oJ2NsZWFyJykKCmltcG9ydCByZXF1ZXN0cywganNvbiwgcmFuZG9tLCBzdHJpbmcsIHRpbWUKZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAKaW1wb3J0IG9zLCBzeXMsZGF0ZXRpbWUsdGltZQoKCgoKbiA9ICIiIlx4MWJbMDszMm1XZWxjb21lIFRvIFNjcmlwdCBSZXRyaWV2aW5nIE1lZ2FieXRlcwoKXDAzM1sxOzM0bVRlbGVncmFtOiBodHRwOi8vdC5tZS9jcmF6eV9uZXQKIiIiCmZvciBjIGluIG46CiAgICBzeXMuc3Rkb3V0LndyaXRlKGMpCiAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgIHRpbWUuc2xlZXAoMC4wMykKZWxzZToKICAgIHByaW50KCdceDFiWzA7MzJtJykKICAgIGxvZyA9ICIiIgoKICAgX19fX18gICAgICAgICAgICAgICAgICAgICAgCiAgLyBfX19ffCAgICAgICAgICAgICAgICAgICAgIAogfCB8ICAgICBfIF9fIF9fIF8gX19fX18gICBfICAKIHwgfCAgICB8ICdfXy8gX2AgfF8gIC8gfCB8IHwgCiB8IHxfX19ffCB8IHwgKF98IHwvIC98IHxffCB8IAogIFxfX19fX3xffCAgXF9fLF8vX19ffFxfXywgfCAKICAgICAgICAgICAgICAgICAgICAgICAgX18vIHwgCiAgICAgICAgICAgICAgICAgICAgICAgfF9fXy8gCiAgXyAgIF8gICAgICBfICAgCiB8IFwgfCB8ICAgIHwgfCAgCiB8ICBcfCB8IF9fX3wgfF8gCiB8IC4gYCB8LyBfIFwgX198CiB8IHxcICB8ICBfXy8gfF8gCiB8X3wgXF98XF9fX3xcX198CgoiIiIKICAgIGZvciBjIGluIGxvZzoKICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGMpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgdGltZS5zbGVlcCgwLjAwMDkpCiAgICBlbHNlOgogICAgICAgIHggPSAiIiIKXDAzM1sxOzM0bSMjIyMjIyMjIyMgQnkgLyBUZWFtIENyYXp5IFBybyAjIyMjIyMjIyMjClwwMzNbMTszNG0jIyMjIyBzY3JpcHQgUmV0cmlldmluZyBNZWdhYnl0ZXMgIyMjIyMKIiIiCiAgICAgICAgCiAgICAgICAgZm9yIHcgaW4geDoKICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZSh3KQogICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjA1KQogICAgICAgIAogICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgICAgICAgICAgICAgbnVtYmVyID0gaW5wdXQoJ1x4MWJbMDszMm1FbnRlciBZb3VyIE51bWJlciA6XHgxYlswOzM5bSAnKS5zdHJpcCgpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgcHdkID0gaW5wdXQoIlx4MWJbMDszMm1FbnRlciBZb3VyIFBhc3N3b3JkIDpceDFiWzA7MzltICIpLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyAocmVxKToKCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBnZW5lcmF0aW9uTGluayhzdHJpbmdMaW5ndGgpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0dGVycyA9IHN0cmluZy5hc2NpaV9sb3dlcmNhc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJycuam9pbigocmFuZG9tLmNob2ljZShsYXR0ZXJzKSBmb3IgaSBpbiByYW5nZShzdHJpbmdMaW5ndGgpKSkKCgogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBmImh0dHBzOi8vd2ViLnZvZGFmb25lLmNvbS5lZy9hdXRoL3JlYWxtcy92Zi1yZWFsbS9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC9hdXRoP2NsaWVudF9pZD13ZWJzaXRlJnJlZGlyZWN0X3VyaT1odHRwcyUzQSUyRiUyRndlYi52b2RhZm9uZS5jb20uZWclMkZhciUyRktDbG9naW4mc3RhdGU9Mjg2ZDEyMTctZGIxNC00ODQ2LTg2YzEtOTUzOWJlZWEwMWVkJnJlc3BvbnNlX21vZGU9cXVlcnkmcmVzcG9uc2VfdHlwZT1jb2RlJnNjb3BlPW9wZW5pZCZub25jZT17Z2VuZXJhdGlvbkxpbmsoMTApfSZrY19sb2NhbGU9ZW4iCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlUGFnZUxvZ2luID0gcmVxLmdldCh1cmwpCiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXAgPSBCZWF1dGlmdWxTb3VwKHJlc3BvbnNlUGFnZUxvZ2luLmNvbnRlbnQsICdodG1sLnBhcnNlcicpCiAgICAgICAgICAgICAgICAgICAgICAgIGdldFVybEFjdGlvbiA9IHNvdXAuZmluZCgnZm9ybScpLmdldCgnYWN0aW9uJykKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyUmVxdWVzdCA9IHsnQWNjZXB0JzondGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsICAnQWNjZXB0LUVuY29kaW5nJzonZ3ppcCwgZGVmbGF0ZSwgYnInLAogICAgICAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdC1MYW5ndWFnZSc6J2VuLUdCLGVuO3E9MC45LGFyO3E9MC44LGFyLUVHO3E9MC43LGVuLVVTO3E9MC42JywKICAgICAgICAgICAgICAgICAgICAgICAgICdDb25uZWN0aW9uJzona2VlcC1hbGl2ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgICAgICAgICAgICAgICAgICAgICAgICdIb3N0Jzond2ViLnZvZGFmb25lLmNvbS5lZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAnT3JpZ2luJzonaHR0cHM6Ly93ZWIudm9kYWZvbmUuY29tLmVnJywKICAgICAgICAgICAgICAgICAgICAgICAgICdSZWZlcmVyJzp1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6J01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84MS4wLjQwNDQuMTM4IFNhZmFyaS81MzcuMzYnfQogICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YSA9IHsndXNlcm5hbWUnOm51bWJlciwgICdwYXNzd29yZCc6cHdkfQogICAgICAgICAgICAgICAgICAgICAgICBzZW5kVXNlckRhdGEgPSByZXEucG9zdChnZXRVcmxBY3Rpb24sIGhlYWRlcnM9aGVhZGVyUmVxdWVzdCwgZGF0YT1mb3JtRGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tSZWdpc3RyeSA9IHNlbmRVc2VyRGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrUmVnaXN0cnkgPSBjaGVja1JlZ2lzdHJ5LmZpbmQoJ0tDbG9naW4nKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBfY2hlY2tSZWdpc3RyeSAhPSAtMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSBjaGVja1JlZ2lzdHJ5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29kZSA9IGNvZGVbY29kZS5pbmRleCgnY29kZT0nKSArIDU6XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyID0geydBY2NlcHQnOicqLyonLCAgJ0FjY2VwdC1FbmNvZGluZyc6J2d6aXAsIGRlZmxhdGUsIGJyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQWNjZXB0LUxhbmd1YWdlJzonZW4tR0IsZW47cT0wLjksYXI7cT0wLjgsYXItRUc7cT0wLjcsZW4tVVM7cT0wLjYnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb25uZWN0aW9uJzona2VlcC1hbGl2ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6J2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0hvc3QnOid3ZWIudm9kYWZvbmUuY29tLmVnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnT3JpZ2luJzonaHR0cHM6Ly93ZWIudm9kYWZvbmUuY29tLmVnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUmVmZXJlcic6J2h0dHBzOi8vd2ViLnZvZGFmb25lLmNvbS5lZy9hci9LQ2xvZ2luJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6J01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84MS4wLjQwNDQuMTM4IFNhZmFyaS81MzcuMzYnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybURhdGFBY2Nlc3NUb2tlbiA9IHsnY29kZSc6X2NvZGUsICAnZ3JhbnRfdHlwZSc6J2F1dGhvcml6YXRpb25fY29kZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWVudF9pZCc6J3dlYnNpdGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZWRpcmVjdF91cmknOidodHRwczovL3dlYi52b2RhZm9uZS5jb20uZWcvYXIvS0Nsb2dpbid9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGF0YUFjY2Vzc1Rva2VuID0gcmVxLnBvc3QoJ2h0dHBzOi8vd2ViLnZvZGFmb25lLmNvbS5lZy9hdXRoL3JlYWxtcy92Zi1yZWFsbS9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC90b2tlbicsIGhlYWRlcnM9aGVhZGVyLCBkYXRhPWZvcm1EYXRhQWNjZXNzVG9rZW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NfdG9rZW4gPSBzZW5kRGF0YUFjY2Vzc1Rva2VuLmpzb24oKVsnYWNjZXNzX3Rva2VuJ10KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0geydIb3N0Jzond2ViLnZvZGFmb25lLmNvbS5lZycsCiAgICAgICAgICAgICAgICAgICAgICdtc2lzZG4nOm51bWJlciwKICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOmYiQmVhcmVyIHthY2Nlc3NfdG9rZW59IiwKICAgICAgICAgICAgICAgICAgICAgJ0Nvbm5lY3Rpb24nOidLZWVwLUFsaXZlJywKICAgICAgICAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOidNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOC4xLjA7IERSQS1MWDIpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MC4wLjM1MzguMTEwIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywKICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAgICAnQWNjZXB0JzonYXBwbGljYXRpb24vanNvbid9CiAgICAgICAgICAgICAgICAgICAgdXJsID0gJ2h0dHBzOi8vd2ViLnZvZGFmb25lLmNvbS5lZy9zZXJ2aWNlcy9keGwvcG9tL3Byb2R1Y3RPcmRlcicKICAgICAgICAgICAgICAgICAgICBkYXRhNCA9ICd7ImNoYW5uZWwiOnsibmFtZSI6Ik1vYmlsZUFwcCJ9LCJvcmRlckl0ZW0iOlt7ImFjdGlvbiI6ImFkZCIsInByb2R1Y3QiOnsiY2hhcmFjdGVyaXN0aWMiOlt7Im5hbWUiOiJFeGVjdXRpb25UeXBlIiwidmFsdWUiOiJTeW5jIn0seyJuYW1lIjoiTGFuZ0lkIiwidmFsdWUiOiJlbiJ9XSwicmVsYXRlZFBhcnR5IjpbeyJpZCI6IiVzIiwibmFtZSI6Ik1TSVNETiIsInJvbGUiOiJTdWJzY3JpYmVyIn1dLCJpZCI6Ik1JX0xGQ19VcGdyYWRlX1BheURpZmYiLCJAdHlwZSI6Ik1JIn19XSwiQHR5cGUiOiJNSVByb2ZpbGUifScgJSBudW1iZXIKICAgICAgICAgICAgICAgICAgICByNCA9IHJlcXVlc3RzLnBvc3QodXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YTQpLnRleHQKICAgICAgICAgICAgICAgICAgICBpZiAnQ29tcGxldGVkJyBpbiByNDoKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCIiKQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXHgxYlswOzMybURvbmUgQWRkIikKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlx4MWJbMDszOW0iKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnJykKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlx4MWJbMDszMW1FUk9SIikKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlx4MWJbMDszOW0iKQogICAgICAgICAgICAgICAgICAgICAgICAK'
